<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <title>Health Care Prediction</title>
</head>
<body>
    <div class="container">
        <div class="window">
            <h1>Personal Info</h1>
            <form method="POST" action="/predict">
                <div class="personal-info">
                    <div class="selection" style="margin-top: -10px;">
                        <h2 class="title" style="margin-top: 30px;">Name</h2>
                        <input type="text" name="name" placeholder="Enter your name" required class="required-input" value="{{ request.form.get('name', '') }}">

                        <h2 class="title" style="margin-top: 30px;">Address</h2>
                        <input type="text" name="address" placeholder="Enter your address" required class="required-input" value="{{ request.form.get('address', '') }}">

                        <h2 class="title" style="margin-top: 30px;">Contact Number</h2>
                        <input type="text" name="contact_number" placeholder="Enter your contact number" required class="required-input" value="{{ request.form.get('contact_number', '') }}">
                        
                        <h2 class="title" style="margin-top: 30px;">Gender</h2>
                        <div class="options" style="margin-top: 30px;">
                            <label>
                                <input type="radio" name="gender" value="Male" required class="required-input" {% if request.form.get('gender') == 'Male' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Male</span>
                            </label>
                            <label>
                                <input type="radio" name="gender" value="Female" required class="required-input" {% if request.form.get('gender') == 'Female' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Female</span>
                            </label>
                        </div>
                    </div>
                </div>

                <h1>Age & Physique</h1>
                <div class="age-Physique">
                    <div class="selection">
                        <h2 class="title">Age</h2>
                        <div class="options-slider">
                            <div class="slider">
                                <input type="range" name="age" id="slider" min="0" max="100" value="{{ request.form.get('age', 25) }}" oninput="this.nextElementSibling.value = this.value">
                                <output>{{ request.form.get('age', 25) }}</output> years
                            </div>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title" style="margin-top: 10px;">Weight</h2>
                        <div class="options-slider">
                            <div class="slider">
                                <input type="range" name="weight" id="slider" min="20" max="150" value="{{ request.form.get('weight', 75) }}" oninput="this.nextElementSibling.value = this.value">
                                <output>{{ request.form.get('weight', 75) }}</output> kg
                            </div>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title" style="margin-top: 10px;">Height</h2>
                        <div class="options-slider">
                            <div class="slider">
                                <input type="range" name="height" id="slider" min="1.3" max="2.3" step="0.01" value="{{ request.form.get('height', 1.85) }}" oninput="document.getElementById('output').value = this.value">
                                <output id="output">{{ request.form.get('height', 1.85) }}</output> m
                            </div>
                        </div>
                    </div>
                </div>

                <h1>Life Events</h1>
                <div class="life-events">
                    <div class="selection">
                        <h2 class="title">Ever Married</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="married" value="Yes" required class="required-input" {% if request.form.get('married') == 'Yes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Yes</span>
                            </label>
                            <label>
                                <input type="radio" name="married" value="No" required class="required-input" {% if request.form.get('married') == 'No' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>No</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Work Type</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="workType" value="Private" required class="required-input" {% if request.form.get('workType') == 'Private' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Private</span>
                            </label>
                            <label>
                                <input type="radio" name="workType" value="Government" required class="required-input" {% if request.form.get('workType') == 'Government' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Government</span>
                            </label>
                            <label>
                                <input type="radio" name="workType" value="Employed" required class="required-input" {% if request.form.get('workType') == 'Employed' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Employed</span>
                            </label>
                            <label>
                                <input type="radio" name="workType" value="Never worked" required class="required-input" {% if request.form.get('workType') == 'Never worked' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Never Worked</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Residence Type</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="residenceType" value="Urban" required class="required-input" {% if request.form.get('residenceType') == 'Urban' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Urban</span>
                            </label>
                            <label>
                                <input type="radio" name="residenceType" value="Rural" required class="required-input" {% if request.form.get('residenceType') == 'Rural' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Rural</span>
                            </label>
                        </div>
                    </div>
                </div>

                <h1>Fitness</h1>
                <div class="fitness">
                    <div class="selection">
                        <h2 class="title">Exercise</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="exercise" value="Yes" required class="required-input" {% if request.form.get('exercise') == 'Yes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Yes</span>
                            </label>
                            <label>
                                <input type="radio" name="exercise" value="No" required class="required-input" {% if request.form.get('exercise') == 'No' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>No</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Hypertension</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="hypertension" value="Yes" required class="required-input" {% if request.form.get('hypertension') == 'Yes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Yes</span>
                            </label>
                            <label>
                                <input type="radio" name="hypertension" value="No" required class="required-input" {% if request.form.get('hypertension') == 'No' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>No</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Heart Disease</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="heart_disease" value="Yes" required class="required-input" {% if request.form.get('heart_disease') == 'Yes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Yes</span>
                            </label>
                            <label>
                                <input type="radio" name="heart_disease" value="No" required class="required-input" {% if request.form.get('heart_disease') == 'No' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>No</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Diabetes</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="diabetesnow" value="Yes" required class="required-input" {% if request.form.get('diabetesnow') == 'Yes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Yes</span>
                            </label>
                            <label>
                                <input type="radio" name="diabetesnow" value="No" required class="required-input" {% if request.form.get('diabetesnow') == 'No' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>No</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Blood Glucose (Fasting)</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="blood_glucose_level" value="80-100 mg/dL" required class="required-input" {% if request.form.get('blood_glucose_level') == '80-100 mg/dL' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>80-100 mg/dL</span>
                            </label>
                            <label>
                                <input type="radio" name="blood_glucose_level" value="101-125 mg/dL" required class="required-input" {% if request.form.get('blood_glucose_level') == '101-125 mg/dL' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>101-125 mg/dL</span>
                            </label>
                            <label>
                                <input type="radio" name="blood_glucose_level" value="126+ mg/dL" required class="required-input" {% if request.form.get('blood_glucose_level') == '126+ mg/dL' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>126+ mg/dL</span>
                            </label>
                        </div>
                    </div>
                    

                    <div class="selection">
                        <h2 class="title" style="margin-top: 10px;">HbA1c Level</h2>
                        <div class="options-slider">
                            <div class="slider">
                                <!-- Add name="hba1c_level" to match Flask route -->
                                <input type="range" name="hba1c_level" id="slider" min="10" max="150" step="1" value="{{ request.form.get('hba1c_level', 90) }}" oninput="this.nextElementSibling.value = this.value">
                                <!-- Display the current value next to the slider -->
                                <output>{{ request.form.get('hba1c_level', 90) }}</output> mg/dL
                            </div>
                        </div>
                    </div>                    
                </div>

                <h1>Lifestyle</h1>
                <div class="lifestyle">
                    <div class="selection">
                        <h2 class="title">Alcohol</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="alcohol" value="Yes" required class="required-input" {% if request.form.get('alcohol') == 'Yes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Yes</span>
                            </label>
                            <label>
                                <input type="radio" name="alcohol" value="No" required class="required-input" {% if request.form.get('alcohol') == 'No' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>No</span>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 class="title">Smoking</h2>
                        <div class="options">
                            <label>
                                <input type="radio" name="smoking" value="Never smoked" required class="required-input" {% if request.form.get('smoking') == 'Never smoked' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Never<br>Smoked</span>
                            </label>
                            <label>
                                <input type="radio" name="smoking" value="Formerly smoked" required class="required-input" {% if request.form.get('smoking') == 'Formerly smoked' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Formerly<br>Smoked</span>
                            </label>
                            <label>
                                <input type="radio" name="smoking" value="Smokes" required class="required-input" {% if request.form.get('smoking') == 'Smokes' %}checked{% endif %}>
                                <span class="circle"></span>
                                <span>Smokes</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Error message above the submit button -->
                <div id="error-message" style="display: none; color: red; font-size: 14px; margin-bottom: 10px;">
                    Please fill out all required fields before submitting.
                </div>

                <button type="submit" id="submitButton" onclick="validateAndShowLoadingBar()" style="margin-bottom: 50px;">Submit & Calculate Prediction</button>

                <!-- Loading bar element -->
                <div id="loading-bar" style="display: none; margin-top: 10px;">
                    <div class="loading-indicator"></div>
                </div>

                <!-- Display the prediction result -->
                {% if diabetes_prob %}
                <div class="prediction">
                <h1>Review</h1>
                    <h2 id="results-section" class="titlesummary"><span class="spaced">My Summary</span> <span class="spaced">{{ gender }}</span> <span class="">{{ age }} years old</span></h2>
                    <div class="prediction-review">
                        <!-- First column (1x4) -->
                        <div class="summary-box">
                            {% if gender|capitalize == 'Male' %}
                                <img src="{{ url_for('static', filename='images/male.png') }}" alt="Male Icon">
                            {% else %}
                                <img src="{{ url_for('static', filename='images/female.png') }}" alt="Female Icon">
                            {% endif %}
                            <br>Weight: {{ weight }} kg<br>Height: {{ height }} m
                        </div>
                    
                        <!-- Second column (2x2) -->
                        <div class="cell"><img src="{{ url_for('static', filename='images/bmi.png') }}" alt="Icon"><br>BMI:{{ bmi }}</div>
                        <div class="cell"><img src="{{ url_for('static', filename='images/blood_glucose.png') }}" alt="Icon"><br>Blood Glucose:<br>{{ blood_glucose_level }}</div>
                        <div class="cell"><img src="{{ url_for('static', filename='images/hba1c.png') }}" alt="Icon"><br>HbA1c Level:<br>{{ hba1c_level }} mg/dL</div>
                        <div class="cell">
                        {% if married|capitalize == 'Yes' %}
                                <img src="{{ url_for('static', filename='images/married.png') }}" alt="Icon">
                            {% else %}
                                <img src="{{ url_for('static', filename='images/single.png') }}" alt="Icon">
                            {% endif %}
                            <br>Ever Married: {{ married }}
                        </div>
                    
                        <!-- Third column (2x2) -->
                        <div class="cell"><img src="{{ url_for('static', filename='images/worktype.png') }}" alt="Icon"><br>Work Type:<br>{{ workType }}</div>
                        <div class="cell">
                            {% if residenceType|capitalize == 'Urban' %}
                                    <img src="{{ url_for('static', filename='images/urban.png') }}" alt="Icon">
                                {% else %}
                                    <img src="{{ url_for('static', filename='images/residence.png') }}" alt="Icon">
                                {% endif %}
                                <br>Residence Type:: {{ residenceType }}
                        </div>
                        <div class="cell">
                            {% if exercise|capitalize == 'Yes' %}
                                    <img src="{{ url_for('static', filename='images/exercise.png') }}" alt="Icon">
                                {% else %}
                                    <img src="{{ url_for('static', filename='images/no_exercise.png') }}" alt="Icon">
                                {% endif %}
                                <br>Exercise:{{ exercise }}
                        </div>
                        <div class="cell">
                            {% if alcohol|capitalize == 'Yes' %}
                                    <img src="{{ url_for('static', filename='images/alcohol.png') }}" alt="Icon">
                                {% else %}
                                    <img src="{{ url_for('static', filename='images/no_alcohol.png') }}" alt="Icon">
                                {% endif %}
                                <br>Alcohol:{{ alcohol }}
                        </div>          
                    
                        <!-- Fourth column (2x2) -->
                        <div class="cell">
                            {% if smoking|capitalize == 'Never smoked' %}
                                    <img src="{{ url_for('static', filename='images/no_smoke.png') }}" alt="Icon">
                                {% elif smoking|capitalize == 'Formerly smoked' %}
                                    <img src="{{ url_for('static', filename='images/quit_smoke.png') }}" alt="Icon">
                                {% elif smoking|capitalize == 'Smokes' %}
                                    <img src="{{ url_for('static', filename='images/smoking.png') }}" alt="Icon">
                                {% endif %}
                                <br>Smoking:<br>{{ smoking }}
                        </div> 
                        <div class="cell"><img src="{{ url_for('static', filename='images/hypertension.png') }}" alt="Icon"><br>Hypertension:{{ hypertension }}</div>
                        <div class="cell"><img src="{{ url_for('static', filename='images/heart_disease.png') }}" alt="Icon"><br>Heart Disease:{{ heart_disease }}</div>
                        <div class="cell"><img src="{{ url_for('static', filename='images/diabetes.png') }}" alt="Icon"><br>Diabetes:{{ diabetesnow }}</div>
                    </div>
                    
                    <div class="selection">
                        <h2 id="prediction-result" class="title">Cardio Probability</h2>
                        <div class="text">
                            <label>
                                <h3>{{ cardio_prob }}%</h3>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 id="prediction-result" class="title">Diabetes Probability</h2>
                        <div class="text">
                            <label>
                                <h3>{{ diabetes_prob }}%</h3>
                            </label>
                        </div>
                    </div>

                    <div class="selection">
                        <h2 id="prediction-result" class="title">Stroke Probability</h2>
                        <div class="text">
                            <label>
                                <h3>{{ stroke_prob }}%</h3>
                            </label>
                        </div>
                    </div>
                </div>       
                {% endif %}
            </form>
        </div>
    </div>

    <!-- Link to the external JavaScript file -->
    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>

</body>
</html>
